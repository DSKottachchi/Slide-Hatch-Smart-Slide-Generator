{"ast":null,"code":"/*\n * JavaScript Load Image Orientation\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2013, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require */\n;\n\n(function (factory) {\n  'use strict';\n\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['./load-image', './load-image-scale', './load-image-meta'], factory);\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('./load-image'), require('./load-image-scale'), require('./load-image-meta'));\n  } else {\n    // Browser globals:\n    factory(window.loadImage);\n  }\n})(function (loadImage) {\n  'use strict';\n\n  var originalHasCanvasOption = loadImage.hasCanvasOption;\n  var originalHasMetaOption = loadImage.hasMetaOption;\n  var originalTransformCoordinates = loadImage.transformCoordinates;\n  var originalGetTransformedOptions = loadImage.getTransformedOptions;\n\n  (function () {\n    // black 2x1 JPEG, with the following meta information set:\n    // - EXIF Orientation: 6 (Rotated 90° CCW)\n    var testImageURL = 'data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAA' + 'AAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBA' + 'QEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQE' + 'BAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/x' + 'ABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAA' + 'AAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==';\n    var img = document.createElement('img');\n\n    img.onload = function () {\n      // Check if browser supports automatic image orientation:\n      loadImage.orientation = img.width === 1 && img.height === 2;\n    };\n\n    img.src = testImageURL;\n  })(); // Determines if the target image should be a canvas element:\n\n\n  loadImage.hasCanvasOption = function (options) {\n    return !!options.orientation === true && !loadImage.orientation || options.orientation > 1 && options.orientation < 9 || originalHasCanvasOption.call(loadImage, options);\n  }; // Determines if meta data should be loaded automatically:\n\n\n  loadImage.hasMetaOption = function (options) {\n    return options && options.orientation === true && !loadImage.orientation || originalHasMetaOption.call(loadImage, options);\n  }; // Transform image orientation based on\n  // the given EXIF orientation option:\n\n\n  loadImage.transformCoordinates = function (canvas, options) {\n    originalTransformCoordinates.call(loadImage, canvas, options);\n    var ctx = canvas.getContext('2d');\n    var width = canvas.width;\n    var height = canvas.height;\n    var styleWidth = canvas.style.width;\n    var styleHeight = canvas.style.height;\n    var orientation = options.orientation;\n\n    if (!(orientation > 1 && orientation < 9)) {\n      return;\n    }\n\n    if (orientation > 4) {\n      canvas.width = height;\n      canvas.height = width;\n      canvas.style.width = styleHeight;\n      canvas.style.height = styleWidth;\n    }\n\n    switch (orientation) {\n      case 2:\n        // horizontal flip\n        ctx.translate(width, 0);\n        ctx.scale(-1, 1);\n        break;\n\n      case 3:\n        // 180° rotate left\n        ctx.translate(width, height);\n        ctx.rotate(Math.PI);\n        break;\n\n      case 4:\n        // vertical flip\n        ctx.translate(0, height);\n        ctx.scale(1, -1);\n        break;\n\n      case 5:\n        // vertical flip + 90 rotate right\n        ctx.rotate(0.5 * Math.PI);\n        ctx.scale(1, -1);\n        break;\n\n      case 6:\n        // 90° rotate right\n        ctx.rotate(0.5 * Math.PI);\n        ctx.translate(0, -height);\n        break;\n\n      case 7:\n        // horizontal flip + 90 rotate right\n        ctx.rotate(0.5 * Math.PI);\n        ctx.translate(width, -height);\n        ctx.scale(-1, 1);\n        break;\n\n      case 8:\n        // 90° rotate left\n        ctx.rotate(-0.5 * Math.PI);\n        ctx.translate(-width, 0);\n        break;\n    }\n  }; // Transforms coordinate and dimension options\n  // based on the given orientation option:\n\n\n  loadImage.getTransformedOptions = function (img, opts, data) {\n    var options = originalGetTransformedOptions.call(loadImage, img, opts);\n    var orientation = options.orientation;\n    var newOptions;\n    var i;\n\n    if (orientation === true) {\n      if (loadImage.orientation) {\n        // Browser supports automatic image orientation\n        return options;\n      }\n\n      orientation = data && data.exif && data.exif.get('Orientation');\n    }\n\n    if (!(orientation > 1 && orientation < 9)) {\n      return options;\n    }\n\n    newOptions = {};\n\n    for (i in options) {\n      if (Object.prototype.hasOwnProperty.call(options, i)) {\n        newOptions[i] = options[i];\n      }\n    }\n\n    newOptions.orientation = orientation;\n\n    switch (orientation) {\n      case 2:\n        // horizontal flip\n        newOptions.left = options.right;\n        newOptions.right = options.left;\n        break;\n\n      case 3:\n        // 180° rotate left\n        newOptions.left = options.right;\n        newOptions.top = options.bottom;\n        newOptions.right = options.left;\n        newOptions.bottom = options.top;\n        break;\n\n      case 4:\n        // vertical flip\n        newOptions.top = options.bottom;\n        newOptions.bottom = options.top;\n        break;\n\n      case 5:\n        // vertical flip + 90 rotate right\n        newOptions.left = options.top;\n        newOptions.top = options.left;\n        newOptions.right = options.bottom;\n        newOptions.bottom = options.right;\n        break;\n\n      case 6:\n        // 90° rotate right\n        newOptions.left = options.top;\n        newOptions.top = options.right;\n        newOptions.right = options.bottom;\n        newOptions.bottom = options.left;\n        break;\n\n      case 7:\n        // horizontal flip + 90 rotate right\n        newOptions.left = options.bottom;\n        newOptions.top = options.right;\n        newOptions.right = options.top;\n        newOptions.bottom = options.left;\n        break;\n\n      case 8:\n        // 90° rotate left\n        newOptions.left = options.bottom;\n        newOptions.top = options.left;\n        newOptions.right = options.top;\n        newOptions.bottom = options.right;\n        break;\n    }\n\n    if (newOptions.orientation > 4) {\n      newOptions.maxWidth = options.maxHeight;\n      newOptions.maxHeight = options.maxWidth;\n      newOptions.minWidth = options.minHeight;\n      newOptions.minHeight = options.minWidth;\n      newOptions.sourceWidth = options.sourceHeight;\n      newOptions.sourceHeight = options.sourceWidth;\n    }\n\n    return newOptions;\n  };\n});","map":{"version":3,"sources":["/Users/dilmikottachchi/Documents/Final Year Research Project/slide-generator-web/client/node_modules/blueimp-load-image/js/load-image-orientation.js"],"names":["factory","define","amd","module","exports","require","window","loadImage","originalHasCanvasOption","hasCanvasOption","originalHasMetaOption","hasMetaOption","originalTransformCoordinates","transformCoordinates","originalGetTransformedOptions","getTransformedOptions","testImageURL","img","document","createElement","onload","orientation","width","height","src","options","call","canvas","ctx","getContext","styleWidth","style","styleHeight","translate","scale","rotate","Math","PI","opts","data","newOptions","i","exif","get","Object","prototype","hasOwnProperty","left","right","top","bottom","maxWidth","maxHeight","minWidth","minHeight","sourceWidth","sourceHeight"],"mappings":"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","sourcesContent":["/*\n * JavaScript Load Image Orientation\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2013, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require */\n\n;(function (factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['./load-image', './load-image-scale', './load-image-meta'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(\n      require('./load-image'),\n      require('./load-image-scale'),\n      require('./load-image-meta')\n    )\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function (loadImage) {\n  'use strict'\n\n  var originalHasCanvasOption = loadImage.hasCanvasOption\n  var originalHasMetaOption = loadImage.hasMetaOption\n  var originalTransformCoordinates = loadImage.transformCoordinates\n  var originalGetTransformedOptions = loadImage.getTransformedOptions\n\n  ;(function () {\n    // black 2x1 JPEG, with the following meta information set:\n    // - EXIF Orientation: 6 (Rotated 90° CCW)\n    var testImageURL =\n      'data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAA' +\n      'AAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBA' +\n      'QEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQE' +\n      'BAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/x' +\n      'ABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAA' +\n      'AAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=='\n    var img = document.createElement('img')\n    img.onload = function () {\n      // Check if browser supports automatic image orientation:\n      loadImage.orientation = img.width === 1 && img.height === 2\n    }\n    img.src = testImageURL\n  })()\n\n  // Determines if the target image should be a canvas element:\n  loadImage.hasCanvasOption = function (options) {\n    return (\n      (!!options.orientation === true && !loadImage.orientation) ||\n      (options.orientation > 1 && options.orientation < 9) ||\n      originalHasCanvasOption.call(loadImage, options)\n    )\n  }\n\n  // Determines if meta data should be loaded automatically:\n  loadImage.hasMetaOption = function (options) {\n    return (\n      (options && options.orientation === true && !loadImage.orientation) ||\n      originalHasMetaOption.call(loadImage, options)\n    )\n  }\n\n  // Transform image orientation based on\n  // the given EXIF orientation option:\n  loadImage.transformCoordinates = function (canvas, options) {\n    originalTransformCoordinates.call(loadImage, canvas, options)\n    var ctx = canvas.getContext('2d')\n    var width = canvas.width\n    var height = canvas.height\n    var styleWidth = canvas.style.width\n    var styleHeight = canvas.style.height\n    var orientation = options.orientation\n    if (!(orientation > 1 && orientation < 9)) {\n      return\n    }\n    if (orientation > 4) {\n      canvas.width = height\n      canvas.height = width\n      canvas.style.width = styleHeight\n      canvas.style.height = styleWidth\n    }\n    switch (orientation) {\n      case 2:\n        // horizontal flip\n        ctx.translate(width, 0)\n        ctx.scale(-1, 1)\n        break\n      case 3:\n        // 180° rotate left\n        ctx.translate(width, height)\n        ctx.rotate(Math.PI)\n        break\n      case 4:\n        // vertical flip\n        ctx.translate(0, height)\n        ctx.scale(1, -1)\n        break\n      case 5:\n        // vertical flip + 90 rotate right\n        ctx.rotate(0.5 * Math.PI)\n        ctx.scale(1, -1)\n        break\n      case 6:\n        // 90° rotate right\n        ctx.rotate(0.5 * Math.PI)\n        ctx.translate(0, -height)\n        break\n      case 7:\n        // horizontal flip + 90 rotate right\n        ctx.rotate(0.5 * Math.PI)\n        ctx.translate(width, -height)\n        ctx.scale(-1, 1)\n        break\n      case 8:\n        // 90° rotate left\n        ctx.rotate(-0.5 * Math.PI)\n        ctx.translate(-width, 0)\n        break\n    }\n  }\n\n  // Transforms coordinate and dimension options\n  // based on the given orientation option:\n  loadImage.getTransformedOptions = function (img, opts, data) {\n    var options = originalGetTransformedOptions.call(loadImage, img, opts)\n    var orientation = options.orientation\n    var newOptions\n    var i\n    if (orientation === true) {\n      if (loadImage.orientation) {\n        // Browser supports automatic image orientation\n        return options\n      }\n      orientation = data && data.exif && data.exif.get('Orientation')\n    }\n    if (!(orientation > 1 && orientation < 9)) {\n      return options\n    }\n    newOptions = {}\n    for (i in options) {\n      if (Object.prototype.hasOwnProperty.call(options, i)) {\n        newOptions[i] = options[i]\n      }\n    }\n    newOptions.orientation = orientation\n    switch (orientation) {\n      case 2:\n        // horizontal flip\n        newOptions.left = options.right\n        newOptions.right = options.left\n        break\n      case 3:\n        // 180° rotate left\n        newOptions.left = options.right\n        newOptions.top = options.bottom\n        newOptions.right = options.left\n        newOptions.bottom = options.top\n        break\n      case 4:\n        // vertical flip\n        newOptions.top = options.bottom\n        newOptions.bottom = options.top\n        break\n      case 5:\n        // vertical flip + 90 rotate right\n        newOptions.left = options.top\n        newOptions.top = options.left\n        newOptions.right = options.bottom\n        newOptions.bottom = options.right\n        break\n      case 6:\n        // 90° rotate right\n        newOptions.left = options.top\n        newOptions.top = options.right\n        newOptions.right = options.bottom\n        newOptions.bottom = options.left\n        break\n      case 7:\n        // horizontal flip + 90 rotate right\n        newOptions.left = options.bottom\n        newOptions.top = options.right\n        newOptions.right = options.top\n        newOptions.bottom = options.left\n        break\n      case 8:\n        // 90° rotate left\n        newOptions.left = options.bottom\n        newOptions.top = options.left\n        newOptions.right = options.top\n        newOptions.bottom = options.right\n        break\n    }\n    if (newOptions.orientation > 4) {\n      newOptions.maxWidth = options.maxHeight\n      newOptions.maxHeight = options.maxWidth\n      newOptions.minWidth = options.minHeight\n      newOptions.minHeight = options.minWidth\n      newOptions.sourceWidth = options.sourceHeight\n      newOptions.sourceHeight = options.sourceWidth\n    }\n    return newOptions\n  }\n})\n"]},"metadata":{},"sourceType":"script"}