{"ast":null,"code":"var _jsxFileName = \"/Users/dilmikottachchi/Documents/Final Year Research Project/slide-generator-web/client/src/components/FileUpload.js\",\n    _s = $RefreshSig$();\n\n// FILE UPLOAD COMPONENT\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport Tesseract from 'tesseract.js'; // CREATING TESSERACT JS WORKER\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  createWorker\n} = Tesseract;\n\nconst FileUpload = () => {\n  _s();\n\n  const worker = createWorker({\n    logger: m => console.log(m)\n  }); // INITIALISING STATES\n\n  const [file, setFile] = useState(null);\n  const [filename, setFilename] = useState('Choose File');\n  const [uploadedFile, setUploadedFile] = useState({});\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false); // ARRAY OF ALLOWED TYPES\n\n  const types = ['image/png', 'image/jpeg']; // CHANGE HANDLER, WHEN FILE IS BEING UPLOADED\n\n  const fileSelectedHandler = e => {\n    let selected = e.target.files[0]; // CHECK WHETHER FILE EXISTS && CHECK WHETHER ARRAY CONTAINS THE TYPE OF THE FILE\n\n    if (selected && types.includes(selected.type)) {\n      setFile(selected);\n      setFilename(selected.name);\n      setError('');\n    } else {\n      setFile(null);\n      setError('Please select an image file (png or jpeg)');\n    }\n  };\n\n  const getBase64 = file => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n\n      reader.onload = () => resolve(reader.result);\n\n      reader.onerror = error => reject(error);\n\n      reader.readAsDataURL(file);\n    });\n  }; // CONVERTION FROM IMAGE TO TEXT (OCR CONVERSTION)\n\n\n  const slideConverison = async file => {\n    setLoading(true); // TESSERACT JS IMPLMENTATION\n\n    await worker.load();\n    await worker.loadLanguage('eng+sin');\n    await worker.initialize('eng+sin');\n    worker._currentJob = null;\n    const {\n      data: {\n        text\n      }\n    } = await worker.recognize(file);\n    let newText = JSON.stringify(text);\n    let replace = text.replace(/[\\n\\r]+/g, ' '); // UPLOADING THE RECOGNIZED TEXT\n\n    try {\n      const res = await axios.post('http://localhost:5000/api/image', {\n        image: replace\n      }, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        }\n      });\n    } catch (err) {\n      if (err === 500) {\n        console.log(\"There was a problem with the server\");\n      } else {\n        console.log(\"Error: \", err.response);\n      }\n    }\n\n    await worker.terminate();\n    setLoading(false);\n  }; // ON IMAGE UPLOAD\n\n\n  const onUpload = async e => {\n    console.log('sdsd');\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append('file', file);\n\n    try {\n      // POST FILE URL LOCATION TO BACKEND\n      // NOTE: IMAGE FILE STORED LOCALLY\n      const res = await axios.post('http://localhost:5000/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          'Access-Control-Allow-Origin': '*',\n          'Access-Control-Allow-Methods': 'GET,PUT,POST,DELETE,PATCH,OPTIONS'\n        }\n      });\n      console.log(\"as\", res);\n      const {\n        fileName,\n        filePath\n      } = res.data;\n      slideConverison(filePath);\n      setUploadedFile({\n        fileName,\n        filePath\n      });\n    } catch (err) {\n      if (err === 500) {\n        console.log(\"There was a problem with the server\");\n      } else {\n        console.log(\"Error: \", err.response);\n      }\n    }\n  }; // LOADER START\n\n\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"form-container text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"spinner-border\",\n      role: \"status\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        class: \"sr-only\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-3\",\n      children: \"Recognizing Texts\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 9\n  }, this); // LOADER END\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"drop-zone\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      method: \"post\",\n      encType: \"multipart/form-data\",\n      onSubmit: onUpload,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        crossOrigin: \"anonymous\",\n        type: \"file\",\n        name: \"files\",\n        id: \"file\",\n        onChange: fileSelectedHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"upload-container\",\n        htmlFor: \"file\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            id: \"Capa_1\",\n            \"enable-background\": \"new 0 0 512 512\",\n            viewBox: \"0 0 512 512\",\n            width: \"50\",\n            children: /*#__PURE__*/_jsxDEV(\"g\", {\n              children: [/*#__PURE__*/_jsxDEV(\"g\", {\n                children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"m159.633 98.476v-52.072h123.163c6.259 0 11.884 3.821 14.191 9.64l16.819 42.431-79.75 28.328z\",\n                  fill: \"#8ac9fe\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 152\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"m313.808 98.48h-22.802l-16.819-42.438c-2.303-5.819-7.926-9.633-14.187-9.633h22.792c6.261 0 11.884 3.814 14.198 9.633z\",\n                  fill: \"#60b7ff\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 271\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"m424.262 98.476h-222.667c-6.259 0-11.884-3.821-14.191-9.64l-12.998-32.792c-2.306-5.819-7.931-9.64-14.191-9.64h-107.898c-8.43 0-15.265 6.834-15.265 15.265v21.542c0 8.43-6.834 15.265-15.265 15.265h-1.407c-11.256 0-20.38 9.124-20.38 20.379v312.611c0 18.849 15.28 34.129 34.129 34.129h410.512v-346.74c0-11.255-9.124-20.379-20.379-20.379z\",\n                  fill: \"#fef0ae\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"m444.639 145.278v320.313h-410.505c-3.722 0-7.31-.596-10.661-1.696 13.632-4.472 23.481-17.302 23.481-32.435v-265.806c0-11.257 9.119-20.376 20.376-20.376z\",\n                  fill: \"#fee97d\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 389\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"m201.595 98.48h-20.561c-6.261 0-11.884-3.824-14.187-9.643l-13.005-32.795c-2.303-5.819-7.926-9.633-14.187-9.633h20.561c6.261 0 11.884 3.814 14.187 9.633l13.005 32.795c2.303 5.819 7.926 9.643 14.187 9.643z\",\n                  fill: \"#fee97d\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 568\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"m88.644 145.274h379.732c11.255 0 20.38 9.124 20.38 20.38v279.562c0 11.255-9.124 20.38-20.38 20.38h-400.112-34.132c18.851 0 34.132-15.281 34.132-34.132v-265.81c0-11.255 9.125-20.38 20.38-20.38z\",\n                  fill: \"#fee45a\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 798\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"m488.753 165.654v279.561c0 11.257-9.119 20.376-20.376 20.376h-19.883c11.257 0 20.386-9.119 20.386-20.376v-279.561c0-11.257-9.129-20.376-20.386-20.376h19.883c11.257 0 20.376 9.119 20.376 20.376z\",\n                  fill: \"#fed402\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"m182.928 378.346h-66.674c-4.258 0-7.71-3.452-7.71-7.71s3.452-7.71 7.71-7.71h66.674c4.258 0 7.71 3.452 7.71 7.71s-3.452 7.71-7.71 7.71z\",\n                    fill: \"#fac600\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 133,\n                    columnNumber: 252\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 249\n                }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"m222.32 410.401h-106.066c-4.258 0-7.71-3.452-7.71-7.71s3.452-7.71 7.71-7.71h106.066c4.258 0 7.71 3.452 7.71 7.71.001 4.258-3.451 7.71-7.71 7.71z\",\n                    fill: \"#fac600\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 133,\n                    columnNumber: 420\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 417\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 149\n              }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n                cx: \"416.741\",\n                cy: \"145.274\",\n                fill: \"#97da7b\",\n                r: \"95.259\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 599\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"m511.998 145.278c0 52.606-42.644 95.26-95.26 95.26-20.859 0-40.156-6.703-55.844-18.083 11.504 4.934 24.19 7.669 37.504 7.669 52.616 0 95.26-42.654 95.26-95.26 0-31.746-15.534-59.864-39.416-77.176 33.966 14.556 57.756 48.287 57.756 87.59z\",\n                fill: \"#80d261\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 660\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"m464.544 130.937-36.282-40.78c-2.926-3.289-7.119-5.17-11.521-5.17s-8.595 1.881-11.521 5.17l-36.282 40.78c-5.661 6.363-5.092 16.111 1.271 21.772 6.364 5.662 16.111 5.092 21.772-1.271l9.34-10.498v49.2c0 8.517 6.904 15.421 15.421 15.421s15.421-6.904 15.421-15.421v-49.2l9.34 10.498c3.047 3.425 7.277 5.17 11.527 5.17 3.646 0 7.306-1.286 10.245-3.9 6.361-5.66 6.93-15.407 1.269-21.771z\",\n                fill: \"#eaf6ff\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n                fill: \"#d8ecfe\",\n                children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"m425.805 151.436c1.789 2.005 3.989 3.444 6.353 4.277v34.43c0 8.512-6.898 15.421-15.421 15.421-2.858 0-5.541-.781-7.844-2.138 4.534-2.694 7.577-7.628 7.577-13.283v-35.688c0-4.726 5.841-6.947 8.981-3.416z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"m463.278 152.711c-2.94 2.611-6.6 3.896-10.25 3.896-2.724 0-5.438-.72-7.834-2.138.833-.504 1.635-1.09 2.385-1.758 6.364-5.665 6.929-15.411 1.275-21.774l-36.28-40.783c-1.069-1.203-2.313-2.221-3.68-3.012 2.354-1.398 5.058-2.149 7.844-2.149 4.41 0 8.595 1.881 11.525 5.161l36.28 40.783c5.664 6.363 5.088 16.109-1.265 21.774z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 243\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 437\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 146\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"uploadTxt\",\n          children: \"Click To Upload A File\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        className: \"slidegen-btn primary-color float-right mt-5\",\n        value: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"output\",\n      children: error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 28\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 9\n  }, this);\n};\n\n_s(FileUpload, \"DWdPxB5/aaatrdGxJZCAo5YYnhk=\");\n\n_c = FileUpload;\nexport default FileUpload;\n\nvar _c;\n\n$RefreshReg$(_c, \"FileUpload\");","map":{"version":3,"sources":["/Users/dilmikottachchi/Documents/Final Year Research Project/slide-generator-web/client/src/components/FileUpload.js"],"names":["React","useState","axios","Tesseract","createWorker","FileUpload","worker","logger","m","console","log","file","setFile","filename","setFilename","uploadedFile","setUploadedFile","error","setError","loading","setLoading","types","fileSelectedHandler","e","selected","target","files","includes","type","name","getBase64","Promise","resolve","reject","reader","FileReader","onload","result","onerror","readAsDataURL","slideConverison","load","loadLanguage","initialize","_currentJob","data","text","recognize","newText","JSON","stringify","replace","res","post","image","headers","err","response","terminate","onUpload","preventDefault","formData","FormData","append","fileName","filePath"],"mappings":"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","sourcesContent":["// FILE UPLOAD COMPONENT\nimport React, {useState} from 'react';\nimport axios from 'axios';\nimport Tesseract from 'tesseract.js';\n\n// CREATING TESSERACT JS WORKER\nconst { createWorker } = Tesseract;\n\nconst FileUpload = () => {\n\n    const worker = createWorker({\n        logger: m => console.log(m),\n    });\n\n    // INITIALISING STATES\n    const [file, setFile] = useState(null);\n    const [filename, setFilename] = useState('Choose File');    \n    const [uploadedFile, setUploadedFile] = useState({});\n    const [error, setError] = useState(null);\n    const [loading, setLoading] = useState(false);\n\n    // ARRAY OF ALLOWED TYPES\n    const types = ['image/png', 'image/jpeg']\n\n    // CHANGE HANDLER, WHEN FILE IS BEING UPLOADED\n    const fileSelectedHandler = (e) => {\n        let selected = e.target.files[0];\n        // CHECK WHETHER FILE EXISTS && CHECK WHETHER ARRAY CONTAINS THE TYPE OF THE FILE\n        if(selected && types.includes(selected.type)) {\n            setFile(selected);\n            setFilename(selected.name);\n            setError('');\n        } else {\n            setFile(null);\n            setError('Please select an image file (png or jpeg)');\n        }\n    }\n\n    const getBase64 = (file) => {\n        return new Promise((resolve,reject) => {\n           const reader = new FileReader();\n           reader.onload = () => resolve(reader.result);\n           reader.onerror = error => reject(error);\n           reader.readAsDataURL(file);\n        });\n    }\n\n    // CONVERTION FROM IMAGE TO TEXT (OCR CONVERSTION)\n    const slideConverison = async(file) => {\n        setLoading(true)\n        // TESSERACT JS IMPLMENTATION\n        await worker.load();\n        await worker.loadLanguage('eng+sin');\n        await worker.initialize('eng+sin');\n        worker._currentJob = null;\n        const { data: { text } } = await worker.recognize(file);\n        let newText = JSON.stringify(text);\n        let replace = text.replace(/[\\n\\r]+/g, ' ');\n\n        // UPLOADING THE RECOGNIZED TEXT\n        try {\n            const res = await axios.post('http://localhost:5000/api/image', { image: replace }, {\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Accept': 'application/json'\n                }\n            });\n        } catch(err) {\n            if(err === 500) {\n                console.log(\"There was a problem with the server\");\n            } else {\n                console.log(\"Error: \", err.response);\n            }\n        }\n        \n        await worker.terminate();\n        setLoading(false);\n    };\n\n    // ON IMAGE UPLOAD\n    const onUpload = async e => {\n        console.log('sdsd');\n        e.preventDefault();\n        const formData = new FormData();\n        formData.append('file', file);\n\n        try {\n            // POST FILE URL LOCATION TO BACKEND\n            // NOTE: IMAGE FILE STORED LOCALLY\n            const res = await axios.post('http://localhost:5000/upload', formData, {\n                headers: {\n                    'Content-Type': 'multipart/form-data',\n                    'Access-Control-Allow-Origin' : '*',\n                    'Access-Control-Allow-Methods':'GET,PUT,POST,DELETE,PATCH,OPTIONS',\n                }\n            });\n            console.log(\"as\", res);\n            const {fileName, filePath} = res.data;\n\n            slideConverison(filePath);\n            setUploadedFile({ fileName, filePath });\n        } catch(err) {\n            if(err === 500) {\n                console.log(\"There was a problem with the server\");\n            } else {\n                console.log(\"Error: \", err.response);\n            }\n        }\n    }\n\n    // LOADER START\n    if(loading) return (\n        <div class=\"form-container text-center\">\n            <div class=\"spinner-border\" role=\"status\">\n                <span class=\"sr-only\">Loading...</span>\n            </div>\n            <div className=\"mt-3\">\n                Recognizing Texts\n            </div>\n        </div> \n    );\n    // LOADER END\n\n    return (\n        <div className=\"drop-zone\">\n            {/* FILE UPLOAD FORM START */}\n            <form method=\"post\" encType=\"multipart/form-data\" onSubmit={onUpload}>\n                <input crossOrigin=\"anonymous\" type=\"file\" name=\"files\" id=\"file\" onChange={fileSelectedHandler}/>\n                <label className=\"upload-container\" htmlFor=\"file\">\n                    <span>\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Capa_1\" enable-background=\"new 0 0 512 512\" viewBox=\"0 0 512 512\" width=\"50\"><g><g><path d=\"m159.633 98.476v-52.072h123.163c6.259 0 11.884 3.821 14.191 9.64l16.819 42.431-79.75 28.328z\" fill=\"#8ac9fe\"/><path d=\"m313.808 98.48h-22.802l-16.819-42.438c-2.303-5.819-7.926-9.633-14.187-9.633h22.792c6.261 0 11.884 3.814 14.198 9.633z\" fill=\"#60b7ff\"/>\n                            <path d=\"m424.262 98.476h-222.667c-6.259 0-11.884-3.821-14.191-9.64l-12.998-32.792c-2.306-5.819-7.931-9.64-14.191-9.64h-107.898c-8.43 0-15.265 6.834-15.265 15.265v21.542c0 8.43-6.834 15.265-15.265 15.265h-1.407c-11.256 0-20.38 9.124-20.38 20.379v312.611c0 18.849 15.28 34.129 34.129 34.129h410.512v-346.74c0-11.255-9.124-20.379-20.379-20.379z\" fill=\"#fef0ae\"/><path d=\"m444.639 145.278v320.313h-410.505c-3.722 0-7.31-.596-10.661-1.696 13.632-4.472 23.481-17.302 23.481-32.435v-265.806c0-11.257 9.119-20.376 20.376-20.376z\" fill=\"#fee97d\"/><path d=\"m201.595 98.48h-20.561c-6.261 0-11.884-3.824-14.187-9.643l-13.005-32.795c-2.303-5.819-7.926-9.633-14.187-9.633h20.561c6.261 0 11.884 3.814 14.187 9.633l13.005 32.795c2.303 5.819 7.926 9.643 14.187 9.643z\" fill=\"#fee97d\"/><path d=\"m88.644 145.274h379.732c11.255 0 20.38 9.124 20.38 20.38v279.562c0 11.255-9.124 20.38-20.38 20.38h-400.112-34.132c18.851 0 34.132-15.281 34.132-34.132v-265.81c0-11.255 9.125-20.38 20.38-20.38z\" fill=\"#fee45a\"/>\n                            <path d=\"m488.753 165.654v279.561c0 11.257-9.119 20.376-20.376 20.376h-19.883c11.257 0 20.386-9.119 20.386-20.376v-279.561c0-11.257-9.129-20.376-20.386-20.376h19.883c11.257 0 20.376 9.119 20.376 20.376z\" fill=\"#fed402\"/><g><path d=\"m182.928 378.346h-66.674c-4.258 0-7.71-3.452-7.71-7.71s3.452-7.71 7.71-7.71h66.674c4.258 0 7.71 3.452 7.71 7.71s-3.452 7.71-7.71 7.71z\" fill=\"#fac600\"/></g><g><path d=\"m222.32 410.401h-106.066c-4.258 0-7.71-3.452-7.71-7.71s3.452-7.71 7.71-7.71h106.066c4.258 0 7.71 3.452 7.71 7.71.001 4.258-3.451 7.71-7.71 7.71z\" fill=\"#fac600\"/></g></g><circle cx=\"416.741\" cy=\"145.274\" fill=\"#97da7b\" r=\"95.259\"/><path d=\"m511.998 145.278c0 52.606-42.644 95.26-95.26 95.26-20.859 0-40.156-6.703-55.844-18.083 11.504 4.934 24.19 7.669 37.504 7.669 52.616 0 95.26-42.654 95.26-95.26 0-31.746-15.534-59.864-39.416-77.176 33.966 14.556 57.756 48.287 57.756 87.59z\" fill=\"#80d261\"/>\n                            <path d=\"m464.544 130.937-36.282-40.78c-2.926-3.289-7.119-5.17-11.521-5.17s-8.595 1.881-11.521 5.17l-36.282 40.78c-5.661 6.363-5.092 16.111 1.271 21.772 6.364 5.662 16.111 5.092 21.772-1.271l9.34-10.498v49.2c0 8.517 6.904 15.421 15.421 15.421s15.421-6.904 15.421-15.421v-49.2l9.34 10.498c3.047 3.425 7.277 5.17 11.527 5.17 3.646 0 7.306-1.286 10.245-3.9 6.361-5.66 6.93-15.407 1.269-21.771z\" fill=\"#eaf6ff\"/><g fill=\"#d8ecfe\">\n                            <path d=\"m425.805 151.436c1.789 2.005 3.989 3.444 6.353 4.277v34.43c0 8.512-6.898 15.421-15.421 15.421-2.858 0-5.541-.781-7.844-2.138 4.534-2.694 7.577-7.628 7.577-13.283v-35.688c0-4.726 5.841-6.947 8.981-3.416z\"/><path d=\"m463.278 152.711c-2.94 2.611-6.6 3.896-10.25 3.896-2.724 0-5.438-.72-7.834-2.138.833-.504 1.635-1.09 2.385-1.758 6.364-5.665 6.929-15.411 1.275-21.774l-36.28-40.783c-1.069-1.203-2.313-2.221-3.68-3.012 2.354-1.398 5.058-2.149 7.844-2.149 4.41 0 8.595 1.881 11.525 5.161l36.28 40.783c5.664 6.363 5.088 16.109-1.265 21.774z\"/></g></g>\n                        </svg>\n                    </span> \n                    <div className=\"uploadTxt\">Click To Upload A File</div>\n                </label>\n                <input type='submit' className=\"slidegen-btn primary-color float-right mt-5\" value='Upload'/>\n            </form>\n            {/* FILE UPLOAD FORM END */}\n            <div className=\"output\">\n                { error && <div className=\"error\">{error}</div>}\n            </div>\n        </div>\n    );\n    \n}\n\nexport default FileUpload;"]},"metadata":{},"sourceType":"module"}